const ge="getElementById",cl="classList",menu=d[ge]("menu"),pauseGame=()=>{say(""),pause=!0,games=[],clear(),menu.style.display="flex",cont[cl].remove("end"),timeouts.forEach(e=>clearTimeout(e))};let tutorial=!1;const clear=()=>{workbook.innerHTML="",matrix.innerHTML="",menu.style.display="none"},makeGames=()=>{clear(),pause=!1,games=[],tutorial||addGame(1,2).then(e=>games.push(e)),timeout(()=>{for(let e=2;e<5;e++)for(let t=2;t<5;t++)addGame(~~e,~~t).then(e=>games.push(e))},tutorial?0:1e3),tutorial=!0,files=0,startNewGame()};let files=0;const startNewGame=e=>{if(!e&&(files+=1)>options.files)return showChoose(),void(files=0);if(workbook.setAttribute("data-msg",`${options[options.lang].wellDone}`),clear(),currentGame&&games.length<4){let e=9;const t=~~(4*Math.random()+3);addGame(t,e-t).then(e=>games.push(e))}0!==games.length?(options.t=!0,selectNewVoice(),currentGame=e||games.shift(),sfx([,,-62,.02,.03,.23,,10.8,5.8,,200,-.07,,.3,2,,,1.3,.13,.3]),createMatrix(),cont[cl].remove("end"),timeout(()=>{setupWorkbook(currentGame)},500)):timeout(startNewGame,500)};function scroller(e){switch(e.deltaMode){case 0:wb.scrollTop+=e.deltaY,wb.scrollLeft+=e.deltaX;break;case 1:wb.scrollTop+=15*e.deltaY,wb.scrollLeft+=15*e.deltaX;break;case 2:wb.scrollTop+=.03*e.deltaY,wb.scrollLeft+=.03*e.deltaX}e.stopPropagation()}d.onwheel=scroller,d.monetization&&d.monetization.state&&(d[ge]("mon-files").style.display="inline-block",d[ge]("coil").innerHTML="You're signed into COIL.");const showChoose=()=>{clear(),timeouts.forEach(e=>clearTimeout(e)),cont[cl].remove("end"),root.style.display="flex",say(options[options.lang].ff),fi("nc",options[options.lang].newCase),fi("cf",options[options.lang].ff),fi("ch",`${options[options.lang].ch} ${options[options.lang].newCase}`),fi("peplabel",options[options.lang].p),fi("catlabel",options[options.lang].c),fi("create",`${options[options.lang].cr} ${options[options.lang].newCase}`),fi("com",options[options.lang].com),fi("com2",options[options.lang].com)},ser=e=>{delete e.slotNum,delete e.catNum,delete e.attempts;let t=JSON.stringify(e);return e.cNms.forEach((e,n)=>t=t.replace(new RegExp(e,"g"),`b${n}b`)),(t=JSON.parse(t)).cNms=e.cNms,JSON.stringify(t)},deser=e=>{return JSON.parse(e).cNms.forEach((t,n)=>e=e.replace(new RegExp(`b${n}b`,"g"),t)),(e=JSON.parse(e)).slotNum=e.slotNames.length,e.catNum=e.cNms.length,e.attempts=0,e},config={nodeUrl:"https://rpc.testnet.near.org",deps:{keyStore:new nearApi.keyStores.BrowserLocalStorageKeyStore},networkId:"testnet"};let subGame;!async function(){const{connect:e,keyStores:t,WalletConnection:n}=nearApi,a={networkId:"testnet",keyStore:new t.BrowserLocalStorageKeyStore,nodeUrl:"https://rpc.testnet.near.org",walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org",explorerUrl:"https://explorer.testnet.near.org"};window.near=await e(a);const o=new n(near),s=await o.account(),r=d[ge]("near");o.isSignedIn()&&(r.innerHTML="You're signed into NEAR."),r.onclick=(()=>{1==confirm("Going to NEAR to log in.")&&o.requestSignIn("dev-1629217600951-74234604044359")});const i=new nearApi.Contract(s,"dev-1629217600951-74234604044359",{viewMethods:["getMessages"],changeMethods:["addMessage"],sender:s});messages=await i.getMessages(),subGame=(()=>{o.isSignedIn()?(clear(),workbook.appendChild(nnote()),root.style.display="none",addGame(5,5).then(e=>{i.addMessage({text:JSON.stringify(e),gas:1e14}),startNewGame(e)})):1==confirm("Going to NEAR to log in.")&&o.requestSignIn("dev-1629217600951-74234604044359")});const l=d[ge]("com-list");sampleSize(20,messages.filter(e=>"{"===e.text[0])).forEach(e=>{const t=ce("div");t.innerHTML=`<div class="sub-game"><span>5x5</span> - ${e.sender}: <span>üëç</span></div>`,t.onclick=(()=>{clear(),root.style.display="none",startNewGame(deser(e.text))}),l.appendChild(t)})}(window);const addGame=(e=2,t=2)=>new Promise(function(n,a){let o,s,r,i,l,c,p,d,u,m,f,h;const g=()=>{o=[...Array(e)].map(e=>({})),s=[],r=0,i=[],l=[],c=!1,p=!1,d=[],u=0,m=!1,f=[],h=[]};g();let $=options.cats,w=options.cNms,k=options.slotNames;k=sampleSize(e,k).map(e=>randSkinTone(e)).map(e=>randGender(e));const y=sampleSize(t,[...Array(w.length).keys()]);w=w.filter((e,t)=>-1!==y.indexOf(t)),$=$.filter((e,t)=>-1!==y.indexOf(t)).map(t=>sampleSize(e+2,t));const b=t*e,N=(e,t)=>{for(const n of Object.keys(t))if(e[n]&&e[n]!==t[n])return!1;return!0},v={*ti(e,t,n){for(const t of[...Array(n.length).keys()])yield*this.tiai(e,{i:t},n)},*tiai(e,t,n){if(N(n[t.i],e)){const a=JSON.parse(JSON.stringify(n));a[t.i]=Object.assign({},n[t.i],e),yield a}},*b(e,t,n){for(const a of[...Array(n.length-1).keys()])if(N(n[a],e)&&N(n[a+1],t)){const o=JSON.parse(JSON.stringify(n));o[a]=Object.assign({},n[a],e),o[a+1]=Object.assign({},n[a+1],t),yield o}},*a(e,t,n){for(const a of[...Array(n.length-1).keys()].map(e=>e+1))if(N(n[a],e)&&N(n[a-1],t)){const o=JSON.parse(JSON.stringify(n));o[a]=Object.assign({},n[a],e),o[a-1]=Object.assign({},n[a-1],t),yield o}},*nt(e,t,n){yield*this.a(e,t,n),yield*this.a(t,e,n)}},C=e=>{let t=!1;const n={};return e.reduce(function(e,a){for(var o in a)n[o]||(n[o]=[]),n[o].indexOf(a[o])>-1&&(t=!0),n[o].push(a[o]),e[o]=a[o];return e},{}),t};const x=e=>{const t=[];for(const n of function*e(t,n){if(0===(t=t.map(e=>"function"==typeof e?e:t=>v[e.type](e.d[0],e.d[1],t))).length){if(C(n))return void(yield!1);yield n}else{const[a,...o]=t;for(const t of a(n))yield*e(o,t)}}(e,o))t.push(n);return t.filter(e=>e)},G=(e=null,t,n)=>{if(t>100)return n(!1);let a,s,r={},i={};const l=(e="",t=1)=>{const n=sample(w.filter(t=>t!==e)),a=$[w.indexOf(n)];return{key:n,d:1===t?sample(a):sampleSize(t,a)}};switch(e||sample([0,0,0,1,2,2,3,3,4,4])){case 0:r[(a=l()).key]=a.d,r[(a=l(a.key)).key]=a.d,s={type:options.clueTypes[0],d:[r,{d:[]}]};break;case 1:r[(a=l()).key]=a.d,i={i:~~(Math.random()*o.length)},s={type:options.clueTypes[1],d:[r,i]};break;case 2:r[(a=l("",2)).key]=a.d[0],i[a.key]=a.d[1],s={type:options.clueTypes[2],d:[r,i]};break;case 3:r[(a=l("",2)).key]=a.d[0],i[a.key]=a.d[1],s={type:options.clueTypes[3],d:[i,r]};break;case 4:r[(a=l()).key]=a.d,i[(a=l(a.key)).key]=a.d,s={type:options.clueTypes[4],d:[r,i]}}d.some(e=>checkToString(e)===checkToString(s.d))?requestAnimationFrame(()=>{G(e,++t,n)}):(d.push(s.d),n(s))},T=(a=null,d=0,y=!1)=>{G(a,d,a=>{if(!a){if(y){const e=ce("div");e[cl].add("clue"),e.innerHTML=`<h3>${options[options.lang].noMore}</h3>`,workbook.appendChild(e)}return}s.push(a);let N=x(s);if(0==N||!N[0])return s.pop(),void T(null,++d,y);const v=N[0].reduce((e,t)=>e+Object.keys(t).length,0);if(l.push(a),(N.reduce((e,t)=>e.concat(t),[]).some(e=>[Object,Array].includes((e||{}).constructor)&&!Object.entries(e||{}).length)||v===r)&&r<b)return s.length>8*o.length?(g(),void T()):void requestAnimationFrame(()=>{T(null,0,y)});if(r=v,!c)return(e=>{c||(c=!0,u=r,h.push({solution:e,selections:r}),i.push(l.slice(0)),l=[])})(N),void requestAnimationFrame(()=>{T(null,0,y)});if(c&&r<b)return r>Math.min(u+e,u+t)&&(e=>{p||(p=!0,h.push({solution:e,selections:r}),i.push(l.slice(0)),l=[])})(N),void requestAnimationFrame(()=>{T(null,0,y)});if(!iareEquals(N[0],x(s.reverse())[0]))return console.log(iareEquals(N[0],x(s.reverse())[0]),N[0],x(s.reverse())[0]),void requestAnimationFrame(()=>{T(null,0,y)});if(h.push({solution:N,selections:r}),m)return showClueArr([a]),void extraClueButton();i.push(l.slice(0)),m=!0,i.map(n=>(n=>{var a=[];let o;for(var s=0,r=n.length;s<r;s+=o)o=Math.max(1,~~(Math.random()*e+1),~~(Math.random()*t+1)),a.push(n.slice(s,s+o));return a})(n)).forEach((e,t)=>{e.forEach((e,n)=>{f.push({cb:h[t].solution,rwc:e})})}),s.length<=3&&(f[f.length-1].rwc=f.map(e=>e.rwc).reduce((e,t)=>e.concat(t)),f=f.slice(f.length-1)),n({slotNum:e,catNum:t,levels:f,extraClue:()=>{T(null,0,!0)},clues:s,cats:$,cNms:w,slotNames:k,attempts:0}),games=games.sort((e,t)=>e.clues.length-t.clues.length)})};T(1)});let userBoard=[];const createMatrix=()=>{userBoard=[];for(let e=0;e<currentGame.slotNum;e++)userBoard.push({});const e=ce("table"),t=ce("col");t.setAttribute("span",1),e.appendChild(t);let n=ce("tr"),a=ce("td");n.appendChild(a),currentGame.slotNames.forEach(e=>{const t=ce("th");t[cl].add("person"),t.innerHTML=`<span>${e}</span>`,n.appendChild(t)}),e.appendChild(n);currentGame.cats.forEach((t,o)=>{(n=ce("tr"))[cl].add("mrow"),(a=ce("th")).innerHTML=currentGame.cNms[o],n.appendChild(a);const s=[options[options.lang].empty,...t];currentGame.slotNames.forEach((e,t)=>{const a=ce("td");a[cl].add("draggable");const r=ce("span");r.setAttribute("data-option",0),r.innerText=s[0],userBoard[t][currentGame.cNms[o]]={d:options[options.lang].empty,span:r},a.onclick=(e=>{((e,t,n,a)=>{let o=e.innerText;(o=t[t.indexOf(o)+1])||(o=t[0]),sfx([.7,.45,82.40689,,,.02,,3,35,,100*(t.indexOf(o)+1)-150,-.06,,,,,,.5,.03,.21]),userBoard[n][a]={d:o,span:e},e.innerText=o,e[cl].remove("correct","incorrect"),e.setAttribute("data-option",t.indexOf(o))})(r,s,t,currentGame.cNms[o])}),a.appendChild(r),n.appendChild(a)}),e.appendChild(n),(n=ce("tr"))[cl].add("mrow")}),(n=ce("tr"))[cl].add("mrow"),n.appendChild(ce("td"));const o=ce("button");o[cl].add("clue"),o.onclick=(()=>{scoreMatrix()&&(o.parentNode.parentNode.parentNode.removeChild(o.parentNode.parentNode),workbook.innerHTML="",workbook.scroll(0,0),cont[cl].add("end"),say(options[options.lang].wellDone),sfx([1.4,,474,,.25,.63,1,1.145,-.3,,100,.09,.09,,,,.09,.4,.65]),pause=!0,timeout(()=>{pause=!1,workbook.innerHTML="",timeouts.forEach(e=>clearTimeout(e)),selectNewVoice(),startNewGame()},3e3))}),o.innerText="üëç",(a=ce("td")).setAttribute("colspan",currentGame.slotNum),a.appendChild(o),n.appendChild(a),e.appendChild(n),matrix.appendChild(e)};let currentGame,sound=!0,pause=!1,games=[];const shuffle=e=>e.sort(()=>.5-Math.random()),timeouts=[],cont=d[ge]("cont"),workbook=d[ge]("wb"),matrix=d[ge]("matrix"),root=d[ge]("root"),gi=(e,t=3)=>parseInt(d[ge](e).value)||t,fi=(e,t)=>d[ge](e).innerText=t,ce=e=>d.createElement(e),timeout=(e,t)=>{timeouts.push(setTimeout(e,t))},iareEquals=(e,t)=>{for(let a=0;a<e.length;a++){for(var n in e[a])if(!(n in t[a])||e[a][n]!==t[a][n])return!1;for(var n in t[a])if(!(n in e[a])||e[a][n]!==t[a][n])return!1}return!0},options={lang:"en",files:8,clueTypes:["ti","tiai","a","b","nt"],cats:[["üëì","üëï","üëò","üé©","üë†","üß§","üß£","üëí","üß¢","üëü","ü©≥"],["üé∑","üé∏","üé∫","üéª","ü™ï","ü•Å","üéπ"],["‚öΩ","üèÄ","üèà","üéæ","ü•è","üèì","ü•ä","üé≥","üèê","‚öæ","üè∏"],["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","üñ§","ü§é","üíî"],["üçá","üçâ","üçä","üçé","ü•ù","ü••","üçê","üçë","üçí","üçã"],["üêí","üêï","ü¶ù","üêà","ü¶ì","üêÑ","üêñ","üê™","ü¶í","üêò","üêÅ","üêá","üêøÔ∏è","ü¶®","ü¶ò"],["ü•Ø","üçü","üçî","üçï","üßÄ","üçú","üç¶","üç©","üçø","ü•ê","üåÆ","üç£","üçö"],["üòç","üòé","üëø","ü§î","üòì","üò∑","ü•∫","üò°","ü§™","üòÄ","ü•∂","ü•±"]],slotNames:["üßü‚Äç‚ôÇÔ∏è","ü¶πüèΩ‚Äç‚ôÇÔ∏è","ü¶∏üèΩ‚Äç‚ôÇÔ∏è","üßõüèΩ‚Äç‚ôÇÔ∏è","üë∑üèª‚Äç‚ôÇÔ∏è","üë®üèΩ‚Äçüé®","üë®üèø‚Äçüíº","üë®üèª‚Äçüîß","üë®üèæ‚Äç‚öïÔ∏è","üë®üèº‚Äçüåæ","üßëüèª‚Äç‚öñÔ∏è","üë®üèæ‚Äçüî¨","üë®üèº‚Äçüé§","üë®üèΩ‚ÄçüöÄ","üëÆüèΩ‚Äç‚ôÇÔ∏è","üë©üèΩ‚Äçüç≥","üßïüèº","üíÇüèΩ‚Äç‚ôÇÔ∏è","üßôüèº‚Äç‚ôÇÔ∏è","üë∞üèª","üë©üèº‚Äç‚úàÔ∏è","üßùüèΩ‚Äç‚ôÇÔ∏è","üë®üèæ‚Äçüöí","üë©üèΩ‚Äçüéì","üë©üèº‚Äçüè≠"],en:{wellDone:"Well Done!",solvable:"Possible Solution.",empty:"space",noMore:"No more clues.",tutorial:"Tutorial: Use the prompts. Fill in the spaces.  Then üëç",newCase:"New Case!",p:"# of People",c:"# of Categories",ch:"Choose",cr:"Create",com:"Community",ff:"Case Files"},tp:{wellDone:"pona!",solvable:"ken pali",empty:"ala",noMore:"pini",tutorial:"kama sona: o kute e toki pi wile sona. tenpo pini la o luka e üëç",newCase:"utala sin",p:"jan",c:"kulupu ilo",ch:"o pana",cr:"o sin",com:"kulupu",ff:"utala mute"},fr:{wellDone:"Bien Jou√©!",solvable:"R√©solution Possible.",empty:"espace",noMore:"Indices termin√©s.",tutorial:"Tutoriel: Utilisez les indices. Remplissez les espaces. Enfin appuyez sur üëç",newCase:"Nouveau Myst√®re!",p:"Nombre de Personnes",c:"Nombre de Cat√©gories",ch:"Choisir",cr:"Cr√©er",com:"Communaut√©",ff:"Fichiers de Myst√®res"},es:{wellDone:"¬°Bien Hecho!",solvable:"Resoluci√≥n Posible.",empty:"espacio",noMore:"No m√°s pistas.",tutorial:"Tutorial: Usa las pistas. Completa la informaci√≥n. Finalmente toca üëç",newCase:"Nuevo Misterio!",p:"Gente",c:"Categor√≠as",ch:"Elegir",cr:"Crear",com:"Comunidad",ff:"Archivos de Misterios"},"zh-CN":{wellDone:"ÂÅöÂæóÂ•Ω!",solvable:"ÂèØ‰ª•ÂÆåÊàê",empty:"Á©∫ÁôΩ",noMore:"Ê≤°Êúâ‰∫Ü",tutorial:"ÊïôÁ®ãÔºö‰ΩøÁî®Á∫øÁ¥¢Âπ∂ÂÆåÊàê‰ø°ÊÅØ„ÄÇ ÁÑ∂ÂêéÂçïÂáª üëç„ÄÇ",newCase:"Êñ∞Ë∞úÂ∫ï!",p:"‰∫∫Êï∞",c:"Á±ªÂà´Êï∞",ch:"ÈÄâÊã©",cr:"ÂàõÂª∫",com:"Á§æÂå∫",ff:"Á•ûÁßòÊ°£Ê°à"}},lang=(e,t=!0)=>{switch(pause=!1,t&&(sfx([.7,.45,82.40689,,,.02,,3,35,,-150,-.06,,,,,,.5,.03,.21]),e.target&&(e.target[cl].add("selected"),e=e?e.target.getAttribute("id"):"en")),options.lang=e,options.lang){case"tp":options.cNms=["len","kalama musi","musi utala","olin","kili","soweli","moku","pilin"];break;case"fr":options.cNms=["le v√™tement","l'instrument","le sport","le c≈ìur","le fruit","l'animal","la bouffe","le sentiment"];break;case"es":options.cNms=["la ropa","el instrumento","el deporte","el coraz√≥n","la fruta","el animal","la comida","el sentimiento"];break;case"zh-CN":options.cNms=["Ë°£Êúç","‰πêÂô®","ËøêÂä®","ÂøÉËÑè","Ê∞¥Êûú","Âä®Áâ©","È£üÁâ©","ÂøÉÊÉÖ"];break;default:options.cNms=["clothes","instrument","sport","heart","fruit","animal","food","mood"]}};lang("en",!1),[...d.getElementsByClassName("lang")].forEach((e,t,n)=>{e.addEventListener("click",e=>{n.forEach(e=>e[cl].remove("selected")),lang(e)})});const checkToString=e=>e.map(e=>Object.keys(e).concat(Object.values(e))).flat().sort().join(),randBetween=(e,t)=>~~(Math.random()*(t-e+1)+e),sample=e=>{const t=null==e?0:e.length;return t?e[Math.floor(Math.random()*t)]:void 0},sampleSize=(e,t,n=[])=>e<1||t.length<1?n:shuffle(e>=t.length?[...n,...t]:Math.random()<e/t.length?sampleSize(e-1,t.slice(1),[...n,t[0]]):sampleSize(e,t.slice(1),n)),stMod=["üèª","üèº","üèΩ","üèæ","üèø"],gMod=["üë©","üë®"],gMod2=["‚ôÇÔ∏è","‚ôÄÔ∏è"],findSkin=new RegExp("\ud83c[\udffb-\udfff]","g"),findGender=new RegExp(gMod.join("|"),"g"),findGender2=new RegExp(gMod2.join("|"),"g"),randSkinTone=e=>e.replace(findSkin,sample(stMod)),randGender=e=>e.replace(findGender,sample(gMod)).replace(findGender2,sample(gMod2));let det;const newDet=()=>{det=randSkinTone(randGender("üïµüèº‚Äç‚ôÇÔ∏è")),d[ge]("det").innerText=det,d.title=`BLANKS ${det} - Reduce the space`,workbook.setAttribute("data-flair",`${det}`)};let voice;newDet();const selectNewVoice=()=>{(voice=(voice=window.speechSynthesis.getVoices().filter(e=>e.lang.indexOf(options.lang)>-1))[randBetween(0,voice.length)])||timeout(selectNewVoice,1e3)};selectNewVoice();const sfx=e=>{pause||sound&&zzfx(...e)};let say=e=>{if("tp"===options.lang)return;if(!sound)return;if(pause)return;selectNewVoice(),speechSynthesis.cancel();const t=new SpeechSynthesisUtterance;t.voice=voice,t.text=e.replace(new RegExp("c≈ìur|coraz√≥n|heart","g"),""),t.lang=options.lang,speechSynthesis.speak(t)};const chooseGame=()=>{clear(),workbook.appendChild(nnote()),root.style.display="none",addGame(gi("people"),gi("cats")).then(e=>startNewGame(e))};zzfxV=.3,zzfx=((e=1,t=.05,n=220,a=0,o=0,s=.1,r=0,i=1,l=0,c=0,p=0,d=0,u=0,m=0,f=0,h=0,g=0,$=1,w=0,k=0)=>{let y,b,N=Math,v=44100,C=2*N.PI,x=l*=500*C/v/v,G=n*=(1-t+2*t*N.random(t=[]))*C/v,T=0,M=0,S=0,O=1,E=0,z=0,A=0;for(c*=500*C/v**3,f*=C/v,p*=C/v,d*=v,u=v*u|0,b=(a=v*a+9)+(w*=v)+(o*=v)+(s*=v)+(g*=v)|0;S<b;t[S++]=A)++z%(100*h|0)||(A=r?1<r?2<r?3<r?N.sin((T%C)**3):N.max(N.min(N.tan(T),1),-1):1-(2*T/C%2+2)%2:1-4*N.abs(N.round(T/C)-T/C):N.sin(T),A=(u?1-k+k*N.sin(C*S/u):1)*(0<A?1:-1)*N.abs(A)**i*e*zzfxV*(S<a?S/a:S<a+w?1-(S-a)/w*(1-$):S<a+w+o?$:S<b-g?(b-S-g)/s*$:0),A=g?A/2+(g>S?0:(S<b-g?1:(b-S)/g)*t[S-g|0]/2):A),T+=(y=(n+=l+=c)*N.cos(f*M++))-y*m*(1-1e9*(N.sin(S)+1)%2),O&&++O>d&&(n+=p,G+=p,O=0),!u||++E%u||(n=G,l=x,O=O||1);return(e=zzfxX.createBuffer(1,b,v)).getChannelData(0).set(t),(n=zzfxX.createBufferSource()).buffer=e,n.connect(zzfxX.destination),n.start(),n}),zzfxX=new(window.AudioContext||webkitAudioContext);const wordClues=e=>{const t=Object.keys(e.d[0]),n=Object.keys(e.d[1]||{});let a,o,s;switch(a=(currentGame.cats[currentGame.cNms.indexOf(t[0])]||[]).indexOf(e.d[0][t[0]])+1,o=(currentGame.cats[currentGame.cNms.indexOf(t[1])]||[]).indexOf(e.d[0][t[1]])+1,n.length&&(s=(currentGame.cats[currentGame.cNms.indexOf(n[0])]||[]).indexOf(e.d[1][n[0]])+1),options.lang){case"es":switch(e.type){case"ti":return`la persona con ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span>, tambi√©n tiene ${t[1]}  <span data-option="${o}">${e.d[0][t[1]]}</span>`;case"tiai":return`<span class="person">${currentGame.slotNames[e.d[1].i]}</span>tiene ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span>`;case"b":return`${n[0]}  <span data-option="${s}">${e.d[1][n[0]]}</span> est√° a la derecha de ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span>`;case"a":return`${n[0]}  <span data-option="${s}">${e.d[1][n[0]]}</span> est√° a la izquierda de ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span>`;case"nt":return`${n[0]}  <span data-option="${s}">${e.d[1][n[0]]}</span> est√° cerca de ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span>`}break;case"fr":switch(e.type){case"ti":return`la personne avec ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span>, aussi tiens ${t[1]}  <span data-option="${o}">${e.d[0][t[1]]}</span>`;case"tiai":return`<span class="person">${currentGame.slotNames[e.d[1].i]}</span>tiens ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span>`;case"b":return`${n[0]}  <span data-option="${s}">${e.d[1][n[0]]}</span> est √† droite de ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span>`;case"a":return`${n[0]}  <span data-option="${s}">${e.d[1][n[0]]}</span> est √† gauche de ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span>`;case"nt":return`${n[0]}  <span data-option="${s}">${e.d[1][n[0]]}</span> est a cot√© de ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span>`}break;case"zh-CN":switch(e.type){case"ti":return`Êúâ <span data-option="${a}">${e.d[0][t[0]]}</span> ${t[0]} ÁöÑ‰∫∫, ‰πüÊúâ <span data-option="${o}">${e.d[0][t[1]]}</span> ÁöÑ${t[1]}`;case"tiai":return`<span class="person">${currentGame.slotNames[e.d[1].i]}</span> Êúâ <span data-option="${a}">${e.d[0][t[0]]}</span> ÁöÑ${t[0]}`;case"b":return`${n[0]} <span data-option="${s}">${e.d[1][n[0]]}</span> Âú® ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span> ÁöÑÂè≥Ëæπ`;case"a":return`${n[0]} <span data-option="${s}">${e.d[1][n[0]]}</span> Âú® ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span> ÁöÑÂ∑¶Ëæπ`;case"nt":return`${n[0]}  <span data-option="${s}">${e.d[1][n[0]]}</span> Â∞±Âú® ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span> ÁöÑÊóÅËæπ`}case"tp":switch(e.type){case"ti":return`jan li jo e ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span> li jo e ${t[1]}  <span data-option="${o}">${e.d[0][t[1]]}</span> kin`;case"tiai":return`jan <span class="person">${currentGame.slotNames[e.d[1].i]}</span>li jo e ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span>`;case"b":return`${n[0]}  <span data-option="${s}">${e.d[1][n[0]]}</span> li lon poka pini pi ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span>`;case"a":return`${n[0]}  <span data-option="${s}">${e.d[1][n[0]]}</span> li lon poka open pi ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span>`;case"nt":return`${n[0]}  <span data-option="${s}">${e.d[1][n[0]]}</span> li lon poka pi ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span>`}break;default:switch(e.type){case"ti":return`The one with ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span>, also has ${t[1]}  <span data-option="${o}">${e.d[0][t[1]]}</span>`;case"tiai":return`<span class="person">${currentGame.slotNames[e.d[1].i]}</span>has ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span>`;case"a":return`One left of ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span>, is ${n[0]}  <span data-option="${s}">${e.d[1][n[0]]}`;case"b":return`One right of ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span>, is ${n[0]}  <span data-option="${s}">${e.d[1][n[0]]}</span>`;case"nt":return`Next to ${t[0]}  <span data-option="${a}">${e.d[0][t[0]]}</span>, is ${n[0]}  <span data-option="${s}">${e.d[1][n[0]]}</span>`}}},showClueArr=(e,t)=>{[...d.getElementsByClassName("loading")].forEach(e=>e[cl].remove("loading")),e.map(wordClues).forEach((e,t)=>{const n=ce("div");n[cl].add("waiting"),n.innerHTML="<div>üîç</div>",workbook.appendChild(n),timeout(()=>{n[cl].remove("waiting"),n.innerHTML="",timeout(()=>{n.onclick=(e=>{say(e.target.innerText.replace(findSkin,""))}),n.innerHTML=e,n[cl].add("clue"),sfx([2,0,60,.01,,.26,1,2.5,.2,,,,1,,,,,.3,.05]),say(n.innerText.replace(findSkin,""))},100)},clueTime*(t+(sound?0:1)))}),t&&timeout(()=>{const e=nnote();workbook.appendChild(e)},1e3*(e.length+1))},scoreMatrix=()=>{currentGame.attempts+=1;const e=currentGame.levels[currentGame.levels.length-1].cb[0];let t=!0;for(let n=0;n<currentGame.slotNum;n++)for(let a=0;a<currentGame.cats.length;a++){const o=userBoard[n][currentGame.cNms[a]];o.span[cl].remove("correct,incorrect"),o.d!==options[options.lang].empty?e[n][currentGame.cNms[a]]===o.d?timeout(()=>{o.span[cl].add("correct"),o.span[cl].remove("incorrect")},100*(a+n)):(timeout(()=>{o.span[cl].remove("correct"),o.span[cl].add("incorrect"),sfx([1.82,,1554,,.03,.23,,1.67,,,,,,,34,,.06,.62,.06])},100*(a+n)),t=!1):t=!1}return t},extraClueButton=()=>{if(!currentGame.extraClue)return;const e=ce("button");e[cl].add("clue"),e.onclick=(()=>{sfx([3,,22,,.14,.08,1,2.8,4,-.7,-300,,,1.9,,.5,.01,.75,.01]),e.parentNode.removeChild(e),currentGame.extraClue()}),e.innerText="+ üîç";for(let e=0;e<3;e++){const e=ce("br");workbook.appendChild(e)}workbook.appendChild(e)},nnote=()=>{const e=ce("div");return e[cl].add("clue"),e.innerHTML='<h3 class="loading">&nbsp;</h3>',e};let clueTime,levelTime;const setupWorkbook=()=>{timeouts.forEach(e=>clearTimeout(e)),clueTime=sound?6e3:800,levelTime=sound?2e3:7e3;const e=1===currentGame.slotNum?sound?7e3:4e3:sound?2500:1e3;let t=0;currentGame.levels.forEach((n,a,o)=>{timeout(()=>{if(currentGame.level=a,showClueArr(n.rwc,a<o.length-1),currentGame.level===o.length-1){const e=nnote();workbook.appendChild(e),timeout(()=>{e[cl].add("clue"),e[cl].remove("loading"),e.innerHTML=`<br/><h3>${options[options.lang].solvable}</h3>`,say(options[options.lang].solvable),workbook.appendChild(e),extraClueButton()},clueTime*n.rwc.length-1+3e3)}},t*clueTime+e+a*levelTime),t+=n.rwc.length});const n=ce("div");1===currentGame.slotNum?(n.innerHTML=`<div class="tutorial">${options[options.lang].tutorial}</div>`,say(options[options.lang].tutorial)):(newDet(),n.innerHTML=`<h1><span>${det}</span> ${options[options.lang].newCase}</h1>`,say(options[options.lang].newCase)),workbook.appendChild(n),workbook.appendChild(nnote())};
