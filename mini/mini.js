const menu=document.getElementById("menu"),pauseGame=()=>{say(""),pause=!0,games=[],menu.style.display="flex",workbook.innerHTML="",cont.classList.remove("end"),matrix.innerHTML="",timeouts.forEach(e=>clearTimeout(e))};let tutorial=!1;const clear=()=>{workbook.innerHTML="",matrix.innerHTML="",menu.style.display="none"},makeGames=()=>{if(clear(),pause=!1,games=[],tutorial){sfx([1.77,,202,.07,.14,.48,,.43,-4.8,,-5,.06,.16,,,,.14,.76]);for(let e=2;e<5;e++)for(let a=2;a<5;a++)addGame(~~e,~~a)}else addGame(1,2),tutorial=!0,timeout(()=>{for(let e=2;e<5;e++)for(let a=2;a<5;a++)addGame(~~e,~~a)},1e3);startNewGame()},startNewGame=()=>{if(newDet(),workbook.setAttribute("data-msg",`${options[options.lang].wellDone}`),clear(),currentGame&&games.length<4){let e=9;const a=~~(4*Math.random()+3);addGame(a,e-a)}0!==games.length?(selectNewVoice(),currentGame=games.shift(),sfx([,,-62,.02,.03,.23,,10.8,5.8,,200,-.07,,.3,2,,,1.3,.13,.3]),currentGame.setupGame(),cont.classList.remove("end"),timeout(()=>{setupWorkbook(currentGame)},500)):timeout(startNewGame,500)},addGame=(e=2,a=2)=>{let t,n,s,o,r,i,l,c,d,p,u,m;const h=()=>{t=[...Array(e)].map(e=>({})),n=[],s=0,o=[],r=[],i=!1,l=!1,c=[],d=0,p=!1,u=[],m=[]};h();const $=options.clueTypes;let f=options.categories,g=options.categoryNames,k=options.slotNames;k=sampleSize(e,k).map(e=>randSkinTone(e)).map(e=>randGender(e));const y=sampleSize(a,[...Array(g.length).keys()]);g=g.filter((e,a)=>-1!==y.indexOf(a)),f=f.filter((e,a)=>-1!==y.indexOf(a)).map(a=>sampleSize(e+2,a));const b=a*e,w=(e,a)=>{for(const t of Object.keys(a))if(e[t]&&e[t]!==a[t])return!1;return!0},x={*ti(e,a,t){for(const a of[...Array(t.length).keys()])yield*this.tiai(e,{index:a},t)},*tiai(e,a,t){if(w(t[a.index],e)){const n=JSON.parse(JSON.stringify(t));n[a.index]=Object.assign({},t[a.index],e),yield n}},*b(e,a,t){for(const n of[...Array(t.length-1).keys()])if(w(t[n],e)&&w(t[n+1],a)){const s=JSON.parse(JSON.stringify(t));s[n]=Object.assign({},t[n],e),s[n+1]=Object.assign({},t[n+1],a),yield s}},*a(e,a,t){for(const n of[...Array(t.length-1).keys()].map(e=>e+1))if(w(t[n],e)&&w(t[n-1],a)){const s=JSON.parse(JSON.stringify(t));s[n]=Object.assign({},t[n],e),s[n-1]=Object.assign({},t[n-1],a),yield s}},*nt(e,a,t){yield*this.a(e,a,t),yield*this.a(a,e,t)}},N=e=>{let a=!1;const t={};return e.reduce(function(e,n){for(var s in n)t[s]||(t[s]=[]),t[s].indexOf(n[s])>-1&&(a=!0),t[s].push(n[s]),e[s]=n[s];return e},{}),a};const v=()=>{const e=[];for(const a of function*e(a,t){if(0===(a=a.map(e=>"function"==typeof e?e:a=>x[e.type](e.data[0],e.data[1],a))).length){if(N(t))return void(yield!1);yield t}else{const[n,...s]=a;for(const a of n(t))yield*e(s,a)}}(n,t))e.push(a);return e.filter(e=>e)},G=(e=null,a,n)=>{if(a>100){const e=ce("div");return e.classList.add("clue"),e.innerHTML=`<h3>${options[options.lang].noMore}</h3>`,sfx([4,,25,.01,.19,.61,1,2.68,.7,.5,,,.12,.9,,.4,.48,.52,.04,.33]),void workbook.appendChild(e)}let s,o,r,i;const l=(e="",a=1)=>{const t=sample(g.filter(a=>a!==e)),n=f[g.indexOf(t)];return{key:t,data:1===a?sample(n):sampleSize(a,n)}};switch(e||~~(Math.random()*$.length)){case 0:(o={})[(s=l()).key]=s.data,o[(s=l(s.key)).key]=s.data,i={type:$[0],data:[o,{data:[]}]};break;case 1:(o={})[(s=l()).key]=s.data,r={index:~~(Math.random()*t.length)},i={type:$[1],data:[o,r]};break;case 2:r={},(o={})[(s=l("",2)).key]=s.data[0],r[s.key]=s.data[1],i={type:$[2],data:[o,r]};break;case 3:r={},(o={})[(s=l("",2)).key]=s.data[0],r[s.key]=s.data[1],i={type:$[3],data:[r,o]};break;case 4:(o={})[(s=l()).key]=s.data,(r={})[(s=l(s.key)).key]=s.data,i={type:$[4],data:[o,r]}}c.some(e=>checkToString(e)===checkToString(i.data))?requestAnimationFrame(()=>{G(e,++a,n)}):(c.push(i.data),n(i))},T=(c=null,$=0)=>{G(c,$,c=>{n.push(c);let y=v();if(0==y||!y[0])return n.pop(),void T(null,++$);const w=y[0].reduce((e,a)=>e+Object.keys(a).length,0);if((y.reduce((e,a)=>e.concat(a),[]).some(e=>[Object,Array].includes((e||{}).constructor)&&!Object.entries(e||{}).length)||w===s)&&s<b)return n.length>8*t.length?(h(),void T()):(r.push(c),void requestAnimationFrame(()=>{T()}));if(s=w,!i)return r.push(c),(e=>{i||(i=!0,d=s,m.push({solution:e,selections:s}),o.push(r.slice(0)),r=[])})(y),void requestAnimationFrame(()=>{T()});if(i&&s<b)return r.push(c),s>Math.min(d+e,d+a)&&(e=>{l||(l=!0,m.push({solution:e,selections:s}),o.push(r.slice(0)),r=[])})(y),void requestAnimationFrame(()=>{T()});if(m.push({solution:y,selections:s}),p)return showClueArr([c]),void extraClueButton();r.push(c),o.push(r.slice(0)),p=!0,o.map(t=>(t=>{var n=[];let s;for(var o=0,r=t.length;o<r;o+=s)s=Math.max(1,~~(Math.random()*e+1),~~(Math.random()*a+1)),n.push(t.slice(o,o+s));return n})(t)).forEach((e,a)=>{e.forEach((t,n)=>{u.push({chore:"add chore",reward:n===e.length-1,correctBoards:m[a].solution,rewardClues:t})})}),n.length<=3&&(u[u.length-1].rewardClues=u.map(e=>e.rewardClues).reduce((e,a)=>e.concat(a)),u=u.slice(u.length-1)),games.push({slotNum:e,catNum:a,levels:u,extraClue:T,clues:n,setupGame:()=>{createMatrix()},categories:f,categoryNames:g,slotNames:k,attempts:0}),games=games.sort((e,a)=>e.clues.length-a.clues.length)})};T(1)};let userBoard=[];const createMatrix=()=>{userBoard=[];for(let e=0;e<currentGame.slotNum;e++)userBoard.push({});const e=ce("table"),a=ce("col");a.setAttribute("span",1),e.appendChild(a);let t=ce("tr"),n=ce("td");t.appendChild(n),currentGame.slotNames.forEach(e=>{const a=ce("th");a.classList.add("person"),a.innerHTML=`<span>${e}</span>`,t.appendChild(a)}),e.appendChild(t);currentGame.categories.forEach((a,s)=>{(t=ce("tr")).classList.add("mrow"),(n=ce("th")).innerHTML=currentGame.categoryNames[s],t.appendChild(n);const o=[options[options.lang].empty,...a];currentGame.slotNames.forEach((e,a)=>{const n=ce("td");n.classList.add("draggable");const r=ce("span");r.setAttribute("data-option",0),r.innerText=o[0],userBoard[a][currentGame.categoryNames[s]]={data:options[options.lang].empty,span:r},n.onclick=(e=>{((e,a,t,n)=>{let s=e.innerText;(s=a[a.indexOf(s)+1])||(s=a[0]),sfx([.7,.45,82.40689,,,.02,,3,35,,100*(a.indexOf(s)+1)-150,-.06,,,,,,.5,.03,.21]),userBoard[t][n]={data:s,span:e},e.innerText=s,e.classList.remove("correct","incorrect"),e.setAttribute("data-option",a.indexOf(s))})(r,o,a,currentGame.categoryNames[s])}),n.appendChild(r),t.appendChild(n)}),e.appendChild(t),(t=ce("tr")).classList.add("mrow")}),(t=ce("tr")).classList.add("mrow");const s=ce("td");s.innerHTML=`${options[options.lang].attempts}: <h2>0</h2>`,t.appendChild(s);const o=ce("button");o.classList.add("clue"),o.onclick=(()=>{scoreMatrix()&&(o.parentNode.parentNode.parentNode.removeChild(o.parentNode.parentNode),workbook.innerHTML="",[...document.querySelectorAll("th.person")].forEach((e,a)=>e.classList.add("bigger")),workbook.scroll(0,0),cont.classList.add("end"),say(options[options.lang].wellDone),sfx(sounds.win),pause=!0,timeout(()=>{pause=!1,workbook.innerHTML="",timeouts.forEach(e=>clearTimeout(e)),selectNewVoice(),startNewGame()},3e3)),s.innerHTML=`${options[options.lang].attempts}: <h2>${currentGame.attempts}</h2>`}),o.innerText="👍",(n=ce("td")).setAttribute("colspan",currentGame.slotNum),n.appendChild(o),t.appendChild(n),e.appendChild(t),matrix.appendChild(e)};let currentGame,sound=!0,pause=!1,games=[];const shuffle=e=>e.sort(()=>.5-Math.random()),timeouts=[],cont=document.getElementById("cont"),workbook=document.getElementById("wb"),matrix=document.getElementById("matrix"),timeout=(e,a)=>{timeouts.push(setTimeout(e,a))},ce=e=>document.createElement(e),sounds={win:[1.4,,474,,.25,.63,1,1.145,-.3,,100,.09,.09,,,,.09,.4,.65]},options={lang:"en",clueTypes:["ti","tiai","a","b","nt"],categories:[["👓","👕","👘","🎩","👠","🧤","🧣","👒","🧢","👟","🩳"],["🎷","🎸","🎺","🎻","🪕","🥁","🎹"],["⚽","🏀","🏈","🎾","🥏","🏓","🥊","🎳","🏐"],["❤️","🧡","💛","💚","💙","💜","🖤","🤎","💔"],["🍇","🍉","🍊","🍎","🥝","🥥","🍐","🍑","🍒","🍋"],["🐒","🐕","🦝","🐈","🦓","🐄","🐖","🐪","🦒","🐘","🐁","🐇","🐿️","🦨","🦘"],["🥯","🍟","🍔","🍕","🧀","🍜","🍦","🍩","🍿"],["😍","😎","👿","🤔","😓","😷","🥺","😡","🤪","😀"]],slotNames:["🧟‍♂️","🦹🏽‍♂️","🦸🏽‍♂️","🧛🏽‍♂️","👷🏻‍♂️","👨🏽‍🎨","👨🏿‍💼","👨🏻‍🔧","👨🏾‍⚕️","👨🏼‍🌾","🧑🏻‍⚖️","👨🏾‍🔬","👨🏼‍🎤","👨🏽‍🚀","👮🏽‍♂️","👩🏽‍🍳","🧕🏼","💂🏽‍♂️","🧙🏼‍♂️","👰🏻","👩🏼‍✈️","🧝🏽‍♂️","👨🏾‍🚒","👩🏽‍🎓","👩🏼‍🏭"],en:{attempts:"Attempts",wellDone:"Well Done!",solvable:"Solvable.",empty:"space",noMore:"No more clues.",tutorial:"Tutorial: Use the prompts. Fill in the spaces.  Then 👍"},tp:{attempts:"nanpa alasa",wellDone:"pona!",solvable:"ken li pini",empty:"ala",noMore:"pona ala",tutorial:"kama sona: sina kute e toki pi wile sona. tempo pini la sina luka e 👍"},fr:{attempts:"Essai #",wellDone:"Bien Joué!",solvable:"Résolution Possible.",empty:"espace",noMore:"Indices terminés.",tutorial:"Tutoriel: Utilisez les indices. Remplissez les espaces. Enfin appuyez sur 👍"},es:{attempts:"Prueba #",wellDone:"¡Bien Hecho!",solvable:"Resolución Posible.",empty:"espacio",noMore:"No más pistas.",tutorial:"Tutorial: Usa las pistas. Completa la información. Finalmente toca 👍"},"zh-CN":{attempts:"猜测 ＃",wellDone:"做得好!",solvable:"可以完成",empty:"空白",noMore:"没有了",tutorial:"教程：使用线索并完成信息。 终于摸了👍"}},lang=(e,a=!0)=>{switch(pause=!1,a&&(sfx([.7,.45,82.40689,,,.02,,3,35,,-150,-.06,,,,,,.5,.03,.21]),e.target&&(e.target.classList.add("selected"),e=e?e.target.getAttribute("id"):"en")),options.lang=e,options.lang){case"tp":options.categoryNames=["len","kalama musi","musi utala","olin","kili","soweli","moku","pilin"];break;case"fr":options.categoryNames=["le vêtement","l'instrument","le sport","le cœur","la fruit","l'animal","la bouffe","le sentiment"];break;case"es":options.categoryNames=["la ropa","el instrumento","la deporte","la corazón","la fruta","el animal","la comida","el sentimiento"];break;case"zh-CN":options.categoryNames=["衣服","仪器","运动","心脏","水果","动物","食物","心情"];break;default:options.categoryNames=["clothes","instrument","sport","heart","fruit","animal","food","mood"]}};lang("en",!1),[...document.getElementsByClassName("lang")].forEach((e,a,t)=>{e.addEventListener("click",e=>{t.forEach(e=>e.classList.remove("selected")),lang(e)})});const checkToString=e=>e.map(e=>Object.keys(e).concat(Object.values(e))).flat().sort().join(),randBetween=(e,a)=>~~(Math.random()*(a-e+1)+e),sample=e=>{const a=null==e?0:e.length;return a?e[Math.floor(Math.random()*a)]:void 0},sampleSize=(e,a,t=[])=>e<1||a.length<1?t:shuffle(e>=a.length?[...t,...a]:Math.random()<e/a.length?sampleSize(e-1,a.slice(1),[...t,a[0]]):sampleSize(e,a.slice(1),t)),stMod=["🏻","🏼","🏽","🏾","🏿"],gMod=["👩","👨"],gMod2=["♂️","♀️"],findSkin=new RegExp("\ud83c[\udffb-\udfff]","g"),findGender=new RegExp(gMod.join("|"),"g"),findGender2=new RegExp(gMod2.join("|"),"g"),randSkinTone=e=>e.replace(findSkin,sample(stMod)),randGender=e=>e.replace(findGender,sample(gMod)).replace(findGender2,sample(gMod2)),newDet=()=>{const e=randSkinTone(randGender("🕵🏼‍♂️"));document.getElementById("det").innerText=e,document.title=`${e} Blanks - Reduce the space`,workbook.setAttribute("data-flair",`${randSkinTone(randGender("🕵🏼‍♂️"))}`)};let voice;newDet();const selectNewVoice=()=>{(voice=(voice=window.speechSynthesis.getVoices().filter(e=>e.lang.indexOf(options.lang)>-1))[randBetween(0,voice.length)])||timeout(selectNewVoice,1e3)};selectNewVoice();const sfx=e=>{pause||sound&&zzfx(...e)};let say=e=>{if("tp"===options.lang)return;if(!sound)return;if(pause)return;selectNewVoice(),speechSynthesis.cancel();const a=new SpeechSynthesisUtterance;a.voice=voice,a.volume=3,a.rate=1,a.text=e.replace(new RegExp("cœur|corazón|heart","g"),""),a.lang=options.lang,speechSynthesis.speak(a)};zzfxV=.3,zzfx=((e=1,a=.05,t=220,n=0,s=0,o=.1,r=0,i=1,l=0,c=0,d=0,p=0,u=0,m=0,h=0,$=0,f=0,g=1,k=0,y=0)=>{let b,w,x=Math,N=44100,v=2*x.PI,G=l*=500*v/N/N,T=t*=(1-a+2*a*x.random(a=[]))*v/N,C=0,M=0,L=0,O=1,z=0,S=0,E=0;for(c*=500*v/N**3,h*=v/N,d*=v/N,p*=N,u=N*u|0,w=(n=N*n+9)+(k*=N)+(s*=N)+(o*=N)+(f*=N)|0;L<w;a[L++]=E)++S%(100*$|0)||(E=r?1<r?2<r?3<r?x.sin((C%v)**3):x.max(x.min(x.tan(C),1),-1):1-(2*C/v%2+2)%2:1-4*x.abs(x.round(C/v)-C/v):x.sin(C),E=(u?1-y+y*x.sin(v*L/u):1)*(0<E?1:-1)*x.abs(E)**i*e*zzfxV*(L<n?L/n:L<n+k?1-(L-n)/k*(1-g):L<n+k+s?g:L<w-f?(w-L-f)/o*g:0),E=f?E/2+(f>L?0:(L<w-f?1:(w-L)/f)*a[L-f|0]/2):E),C+=(b=(t+=l+=c)*x.cos(h*M++))-b*m*(1-1e9*(x.sin(L)+1)%2),O&&++O>p&&(t+=d,T+=d,O=0),!u||++z%u||(t=T,l=G,O=O||1);return(e=zzfxX.createBuffer(1,w,N)).getChannelData(0).set(a),(t=zzfxX.createBufferSource()).buffer=e,t.connect(zzfxX.destination),t.start(),t}),zzfxX=new(window.AudioContext||webkitAudioContext);const wordClues=e=>{const a=Object.keys(e.data[0]),t=Object.keys(e.data[1]||{});let n,s,o;switch(n=currentGame.categories[currentGame.categoryNames.indexOf(a[0])].indexOf(e.data[0][a[0]])+1,s=(currentGame.categories[currentGame.categoryNames.indexOf(a[1])]||[]).indexOf(e.data[0][a[1]])+1,t.length&&(o=(currentGame.categories[currentGame.categoryNames.indexOf(t[0])]||[]).indexOf(e.data[1][t[0]])+1),options.lang){case"es":switch(e.type){case"ti":return`la persona con ${a[0]}  <span data-option="${n}">${e.data[0][a[0]]}</span>, también tiene ${a[1]}  <span data-option="${s}">${e.data[0][a[1]]}</span>`;case"tiai":return`<span class="person">${currentGame.slotNames[e.data[1].index]}</span>tiene ${a[0]} <span data-option="${n}">${e.data[0][a[0]]}</span>`;case"b":return`${t[0]}  <span data-option="${o}">${e.data[1][t[0]]}</span> está a la derecha de ${a[0]}  <span data-option="${n}">${e.data[0][a[0]]}</span>`;case"a":return`${t[0]}  <span data-option="${o}">${e.data[1][t[0]]}</span> está a la izquierda de ${a[0]}  <span data-option="${n}">${e.data[0][a[0]]}</span>`;case"nt":return`${t[0]}  <span data-option="${o}">${e.data[1][t[0]]}</span> está cerca de ${a[0]}  <span data-option="${n}">${e.data[0][a[0]]}</span>`}break;case"fr":switch(e.type){case"ti":return`la personne avec ${a[0]}  <span data-option="${n}">${e.data[0][a[0]]}</span>, aussi tiens ${a[1]}  <span data-option="${s}">${e.data[0][a[1]]}</span>`;case"tiai":return`<span class="person">${currentGame.slotNames[e.data[1].index]}</span>tiens ${a[0]} <span data-option="${n}">${e.data[0][a[0]]}</span>`;case"b":return`${t[0]}  <span data-option="${o}">${e.data[1][t[0]]}</span> est à droite de ${a[0]}  <span data-option="${n}">${e.data[0][a[0]]}</span>`;case"a":return`${t[0]}  <span data-option="${o}">${e.data[1][t[0]]}</span> est à gauche de ${a[0]}  <span data-option="${n}">${e.data[0][a[0]]}</span>`;case"nt":return`${t[0]}  <span data-option="${o}">${e.data[1][t[0]]}</span> est a coté de ${a[0]}  <span data-option="${n}">${e.data[0][a[0]]}</span>`}break;case"zh-CN":switch(e.type){case"ti":return`有 <span data-option="${n}">${e.data[0][a[0]]}</span> ${a[0]} 的人, 也有 <span data-option="${s}">${e.data[0][a[1]]}</span> 的${a[1]}  `;case"tiai":return`<span class="person">${currentGame.slotNames[e.data[1].index]}</span> 有 <span data-option="${n}">${e.data[0][a[0]]}</span> 的${a[0]}`;case"b":return`${t[0]} <span data-option="${o}">${e.data[1][t[0]]}</span> 在 ${a[0]}  <span data-option="${n}">${e.data[0][a[0]]}</span> 的右边`;case"a":return`${t[0]} <span data-option="${o}">${e.data[1][t[0]]}</span> 在 ${a[0]}  <span data-option="${n}">${e.data[0][a[0]]}</span> 的左边`;case"nt":return`${t[0]}  <span data-option="${o}">${e.data[1][t[0]]}</span> 就在 ${a[0]}  <span data-option="${n}">${e.data[0][a[0]]}</span> 的旁边`}case"tp":switch(e.type){case"ti":return`jan li jo e ${a[0]}  <span data-option="${n}">${e.data[0][a[0]]}</span>, taso jo e ${a[1]}  <span data-option="${s}">${e.data[0][a[1]]}</span>`;case"tiai":return`jan <span class="person">${currentGame.slotNames[e.data[1].index]}</span>li jo e ${a[0]} <span data-option="${n}">${e.data[0][a[0]]}</span>`;case"b":return`${t[0]}  <span data-option="${o}">${e.data[1][t[0]]}</span> li lon poka pini e ${a[0]}  <span data-option="${n}">${e.data[0][a[0]]}</span>`;case"a":return`${t[0]}  <span data-option="${o}">${e.data[1][t[0]]}</span> li lon poka open e ${a[0]}  <span data-option="${n}">${e.data[0][a[0]]}</span>`;case"nt":return`${t[0]}  <span data-option="${o}">${e.data[1][t[0]]}</span> li lon poka e ${a[0]}  <span data-option="${n}">${e.data[0][a[0]]}</span>`}break;default:switch(e.type){case"ti":return`The one with ${a[0]}  <span data-option="${n}">${e.data[0][a[0]]}</span>, also has ${a[1]}  <span data-option="${s}">${e.data[0][a[1]]}</span>`;case"tiai":return`<span class="person">${currentGame.slotNames[e.data[1].index]}</span>has ${a[0]} <span data-option="${n}">${e.data[0][a[0]]}</span>`;case"a":return`One left of ${a[0]}  <span data-option="${n}">${e.data[0][a[0]]}</span>,\n        is ${t[0]}  <span data-option="${o}">${e.data[1][t[0]]}`;case"b":return`One right of ${a[0]}  <span data-option="${n}">${e.data[0][a[0]]}</span>, is ${t[0]}  <span data-option="${o}">${e.data[1][t[0]]}</span>`;case"nt":return`Next to ${a[0]}  <span data-option="${n}">${e.data[0][a[0]]}</span>, is ${t[0]}  <span data-option="${o}">${e.data[1][t[0]]}</span>`}}},showClueArr=(e,a)=>{[...document.getElementsByClassName("loading")].forEach(e=>e.classList.remove("loading")),e.map(wordClues).forEach((e,a)=>{const t=ce("div");t.classList.add("waiting"),t.innerHTML="<h1>✉️</h1>",workbook.appendChild(t),timeout(()=>{t.classList.add("clue"),t.classList.remove("waiting"),t.onclick=(e=>{say(e.target.innerText.replace(findSkin,""))}),t.innerHTML=e,sfx([2,0,60,.01,,.26,1,2.5,.2,,,,1,,,,,.3,.05]),say(t.innerText.replace(findSkin,""))},clueTime*(a+(sound?0:1)))}),a&&timeout(()=>{const e=nnote();workbook.appendChild(e)},1e3*(e.length+1))},scoreMatrix=()=>{currentGame.attempts+=1;const e=currentGame.levels[currentGame.levels.length-1].correctBoards[0];let a=!0;for(let t=0;t<currentGame.slotNum;t++)for(let n=0;n<currentGame.categories.length;n++){const s=userBoard[t][currentGame.categoryNames[n]];s.span.classList.remove("correct,incorrect"),s.data!==options[options.lang].empty?e[t][currentGame.categoryNames[n]]===s.data?timeout(()=>{s.span.classList.add("correct"),s.span.classList.remove("incorrect")},100*(n+t)):(timeout(()=>{s.span.classList.remove("correct"),s.span.classList.add("incorrect"),sfx([1.82,,1554,,.03,.23,,1.67,,,,,,,34,,.06,.62,.06])},100*(n+t)),a=!1):a=!1}return a},extraClueButton=()=>{const e=ce("button");e.classList.add("clue"),e.onclick=(()=>{sfx([3,,22,,.14,.08,1,2.8,4,-.7,-300,,,1.9,,.5,.01,.75,.01]),e.parentNode.removeChild(e),currentGame.extraClue()}),e.innerText="📩";for(let e=0;e<3;e++){const e=ce("br");workbook.appendChild(e)}workbook.appendChild(e)},nnote=()=>{const e=ce("div");return e.classList.add("clue"),e.innerHTML='<h3 class="loading">&nbsp;</h3>',e};let clueTime,levelTime;const setupWorkbook=()=>{clueTime=sound?6e3:800,levelTime=sound?2e3:7e3;const e=1===currentGame.slotNum?7e3:0;let a=0;if(currentGame.levels.forEach((t,n,s)=>{timeout(()=>{if(currentGame.level=n,showClueArr(t.rewardClues,n<s.length-1),currentGame.level===s.length-1){const e=nnote();workbook.appendChild(e),timeout(()=>{e.classList.add("clue"),e.classList.remove("loading"),e.innerHTML=`<br/><br/><h3>${options[options.lang].solvable}</h3>`,say(options[options.lang].solvable),workbook.appendChild(e),extraClueButton()},clueTime*t.rewardClues.length-1)}},a*clueTime+e+n*levelTime),a+=t.rewardClues.length}),e>0){const e=ce("div");e.innerHTML=`<div class="tutorial">${options[options.lang].tutorial}</div>`,say(options[options.lang].tutorial),workbook.appendChild(e),workbook.appendChild(nnote())}};function scroller(e){switch(e.deltaMode){case 0:wb.scrollTop+=e.deltaY,wb.scrollLeft+=e.deltaX;break;case 1:wb.scrollTop+=15*e.deltaY,wb.scrollLeft+=15*e.deltaX;break;case 2:wb.scrollTop+=.03*e.deltaY,wb.scrollLeft+=.03*e.deltaX}e.stopPropagation()}document.onwheel=scroller;
